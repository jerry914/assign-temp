{"version":3,"sources":["webpack:///./src/views/counselors/listCounselor.vue","webpack:///./src/views/counselors/listCounselor.vue?f49a","webpack:///./node_modules/core-js/modules/es.array.filter.js","webpack:///./node_modules/core-js/internals/array-fill.js","webpack:///./src/views/counselors/listCounselor.vue?dae7","webpack:///./node_modules/core-js/modules/es.array.fill.js"],"names":["class","_createElementVNode","_createTextVNode","style","key","_createElementBlock","_hoisted_2","_createVNode","_component_el_row","gutter","default","_component_el_col","sm","md","_component_el_table","data","$options","_component_el_table_column","prop","label","width","header","_component_el_popover","placement","title","trigger","reference","_hoisted_4","_component_QuestionFilled","innerHTML","getHtmlContent","_hoisted_3","_","scope","_toDisplayString","row","available_time","_createBlock","_Fragment","_renderList","id","item","consultation_day","consultation_time","name","crisis_level","_createCommentVNode","$data","i","_normalizeStyle","length","span","days","day","times","time","justify","Number","isInteger","value","j","mixins","weektimeMixin","counselorNum","maxNum","created","$store","dispatch","computed","counselors","this","state","cases","assignCases","methods","countAvailable","r","c","timeTable","Array","fill","map","forEach","counselor","split","aAry","parseInt","dayRule","timeRule","getCasesByCounselorId","filter","e","counselor_id","sort","a","b","aDay","bDay","__exports__","render","$","$filter","arrayMethodHasSpeciesSupport","HAS_SPECIES_SUPPORT","target","proto","forced","callbackfn","arguments","undefined","toObject","toAbsoluteIndex","lengthOfArrayLike","module","exports","O","argumentsLength","index","end","endPos","addToUnscopables"],"mappings":"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","file":"js/chunk-232a3ec8.b274b50e.js","sourcesContent":["<template lang=\"pug\">\n.page-container\n    .page-title 心理師班表\n    el-row(:gutter=\"20\")\n        el-col(:sm=\"24\" :md=\"12\")\n            el-table.list-container(:data=\"counselors\" style=\"width: 100%\")\n                el-table-column(prop=\"name\" label=\"姓名\" width=\"100\")\n                el-table-column(prop=\"available_time\" label=\"可諮商時段\")\n                    template(#header='')\n                        el-popover(placement=\"right\" title=\"\" :width=\"200\" trigger=\"hover\" popper-class=\"weektimePop\")\n                            div(v-html=\"getHtmlContent()\")\n                            template(#reference)\n                                span 可諮商時段\n                                    QuestionFilled(style=\"width: 1em; height: 1em; padding: 0 0 0 3px\")\n                    template(#default='scope')\n                        div {{scope.row.available_time}}\n                el-table-column(v-if=\"cases.data\" prop=\"assign_time\" label=\"目前排班狀況\")\n                    template(#default='scope')\n                        div(v-for=\"item in getCasesByCounselorId(scope.row.id)\") {{item.consultation_day}}{{item.consultation_time}}-{{item.name}} | {{item.crisis_level}}\n        el-col(:sm=\"24\" :md=\"12\")\n            div(style=\"display:flex;\")\n                div 0/{{counselorNum}}\n                div.color-box\n                    .color-box-item(v-for=\"i in maxNum+1\" :style=\"'background-color: rgba(242, 164, 75, '+(i-1)/maxNum+');width: '+100/maxNum+'%;'\")\n                div {{maxNum}}/{{counselorNum}} (有排班人數/總人數)\n            .counselor-time-table(v-if=\"countAvailable().length>1\")\n                el-row\n                    el-col.picker-col-lable.row-border(:span=\"4\")\n                    el-col.picker-col.row-border(v-for=\"day in days\" :span=\"4\") {{day.label}}\n                el-row.picker-row(v-for=\"(time,i) in times\" justify=\"space-around\" :style=\"!Number.isInteger(time.value)?'border-top: 2px solid #F2A54B':''\")\n                    el-col.picker-col-lable(:span=\"4\") {{time.label}}\n                    el-col.picker-col(v-for=\"(day,j) in days\" :span=\"4\" :style=\"'background-color: rgba(242, 164, 75, '+countAvailable()[j][i]/maxNum+')'\")\n</template>\n\n<script>\nimport {weektimeMixin} from \"@/components/weektimeMixin\"\nexport default {\n    mixins: [weektimeMixin],\n    data () {\n        return {\n            counselorNum: -1,\n            maxNum: 0,\n        }\n    },\n    async created() {\n        await this.$store.dispatch('fetchCounselors')\n        await this.$store.dispatch('fetchAssignCases')\n    },\n    computed: {\n        counselors() {\n            return this.$store.state.counselors\n        },\n        cases() {\n            return this.$store.state.assignCases\n        }\n    },\n    methods: {\n        countAvailable() {\n            // Init\n            this.counselorNum = this.counselors.length\n            var [r, c] = [this.days.length, this.times.length]\n            var timeTable = Array(r).fill().map(()=>Array(c).fill(0))\n            this.counselors.forEach(counselor => {\n                if(counselor.available_time!=\"\") {\n                    counselor.available_time.split(',').forEach(time => {\n                        let aAry = time.split('')\n                        aAry[0] = parseInt(this.dayRule[aAry[0]])-1\n                        aAry[1] = parseInt(this.timeRule[aAry[1]])-1\n                        if(!timeTable[aAry[0]][aAry[1]]) timeTable[aAry[0]][aAry[1]]=1\n                        else timeTable[aAry[0]][aAry[1]] += 1\n\n                        if(timeTable[aAry[0]][aAry[1]]>this.maxNum) this.maxNum = timeTable[aAry[0]][aAry[1]]\n                    })\n                }\n            })\n            return timeTable\n        },\n        getCasesByCounselorId(id) {\n            let cases = this.cases.data.filter(e => e.counselor_id == id)\n            cases.sort((a,b) => {\n                let aDay = this.dayRule[a.consultation_day]\n                let bDay = this.dayRule[b.consultation_day]\n                if(aDay == bDay){\n                    return this.timeRule[a.consultation_time]-this.timeRule[b.consultation_time]\n                }\n                else{\n                    return this.dayRule[a.consultation_day]-this.dayRule[b.consultation_day]\n                }\n            })\n            return cases\n        }\n    }\n}\n</script>\n<style lang=\"sass\" scoped>\n@import \"@/style/common.sass\"\n.color-box\n    border: 1px solid $GrayBorder\n    height: 20px\n    width: 100px\n    margin: 0 10px\n    display: flex\n.color-box-item \n    height: 100%\n    background-color: $BaseBorder\n.picker-row\n    border-bottom: 1px solid $LightBorder\n    text-align: center\n    user-select: none\n.picker-col-lable\n    word-wrap: break-word\n    text-align: center\n    padding: 3px\n.picker-col\n    word-wrap: break-word\n    border-left: 1px solid $LightBorder\n    text-align: center\n    padding: 3px\n.row-border\n    border-bottom: 2px solid #F2A54B\n.counselor-time-table\n    @include tableBorder()\n    margin: 20px 0\n    background-color: #fff\n    overflow: hidden\n</style>\n","import { render } from \"./listCounselor.vue?vue&type=template&id=3392e708&scoped=true&lang=pug\"\nimport script from \"./listCounselor.vue?vue&type=script&lang=js\"\nexport * from \"./listCounselor.vue?vue&type=script&lang=js\"\n\nimport \"./listCounselor.vue?vue&type=style&index=0&id=3392e708&lang=sass&scoped=true\"\n\nimport exportComponent from \"/Users/jerry/Desktop/AI計畫/諮商派案/assignSystem/frontend/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-3392e708\"]])\n\nexport default __exports__","'use strict';\nvar $ = require('../internals/export');\nvar $filter = require('../internals/array-iteration').filter;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('filter');\n\n// `Array.prototype.filter` method\n// https://tc39.es/ecma262/#sec-array.prototype.filter\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  filter: function filter(callbackfn /* , thisArg */) {\n    return $filter(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","'use strict';\nvar toObject = require('../internals/to-object');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\n\n// `Array.prototype.fill` method implementation\n// https://tc39.es/ecma262/#sec-array.prototype.fill\nmodule.exports = function fill(value /* , start = 0, end = @length */) {\n  var O = toObject(this);\n  var length = lengthOfArrayLike(O);\n  var argumentsLength = arguments.length;\n  var index = toAbsoluteIndex(argumentsLength > 1 ? arguments[1] : undefined, length);\n  var end = argumentsLength > 2 ? arguments[2] : undefined;\n  var endPos = end === undefined ? length : toAbsoluteIndex(end, length);\n  while (endPos > index) O[index++] = value;\n  return O;\n};\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!./listCounselor.vue?vue&type=style&index=0&id=3392e708&lang=sass&scoped=true\"","var $ = require('../internals/export');\nvar fill = require('../internals/array-fill');\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\n// `Array.prototype.fill` method\n// https://tc39.es/ecma262/#sec-array.prototype.fill\n$({ target: 'Array', proto: true }, {\n  fill: fill\n});\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('fill');\n"],"sourceRoot":""}