{"version":3,"sources":["webpack:///./src/views/assign/result.vue","webpack:///./src/views/assign/resultBlock.vue","webpack:///./src/views/assign/resultBlock.vue?5ffc","webpack:///./src/views/assign/result.vue?fa08","webpack:///./src/views/assign/result.vue?7874","webpack:///./src/views/assign/resultBlock.vue?1d6a"],"names":["class","_createElementVNode","_createTextVNode","style","_createElementBlock","_createVNode","_component_el_row","default","_component_el_col","span","_hoisted_2","_","_component_download_excel","data","$options","fields","json_fields","name","_component_el_button","type","size","_hoisted_3","_component_el_popover","placement","title","width","trigger","reference","_hoisted_13","_component_InfoFilled","_hoisted_4","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_16","_Fragment","_renderList","times","time","i","_toDisplayString","label","offset","_normalizeClass","timetable","key","rows","value","_createBlock","_component_resultBlock","results","counselors","_createCommentVNode","tableLoading","$props","$data","length","item","first_consultation_date","_normalizeStyle","counselor_name","align","row","_hoisted_5","caseId","mixins","weektimeMixin","props","unassignList","assignList","showNum","mounted","result","this","push","checkRangeDay","end_consultation_date","status","resultData","methods","getColor","getDatetime","weekdays","today","Date","setDate","getDate","date","getFullYear","getMonth","getDay","addOffset","startdate","countConsultationNumber","__exports__","components","resultBlock","assignCases","available_time","crisis_level","discription","created_date","init_counselor_name","consultation_day","consultation_time","counselor_id","id","dayList","created","$store","dispatch","createResultTable","console","log","cloneDeep","state","offset_date","forEach","counselor","availableTimeAry","split","availableTime","indexOf","charAt","assingCase","day","find","e","isWeekend","getDateStr","getWeekAry","ary","the_day","downloadXLS","cases","consultation_datetime","days","checkOffsetIsHoliday","checkHoliday","render"],"mappings":"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","file":"js/chunk-259c3ca8.47796848.js","sourcesContent":["<template lang=\"pug\">\n.page-container\n    el-row\n        el-col(:span=\"12\")\n            .page-title 派案列表\n        el-col(:span=\"12\")\n            download-excel(:data='downloadXLS()' :fields=\"json_fields\" :name='\"派案列表\"+getDateStr(0)+\".xls\"')\n                el-button(type=\"success\" size=\"medium\" style=\"float: right;margin-top:30px;\") 下載派案列表\n    el-popover(placement=\"bottom\" title=\"\" :width=\"400\" trigger=\"hover\")\n        strong 操作方式\n        div 點擊時段可以查看更詳細排班情況\n        br\n        strong 方塊顏色意義\n        div 灰色空格：心理師此時段為有空\n        div 藍色實心：心理師此時段已有排到個案，並且諮商次數為0~6次\n        div 紅色實心：心理師此時段已有排到個案，並且諮商次數為7~14次\n        div 紫色實心：心理師此時段已有排到個案，並且諮商次數為15次以上\n        template(#reference)\n            span.timetable-info 操作說明\n                InfoFilled(style=\"width: 1em; height: 1em; padding: 0 0 0 3px\")\n    .result-table\n        .result-aside\n            div(style=\"width: 100px;height: 1.3em;font-size: 0.9em;text-align: center\") 時段 \\ 日期\n            .result-aside-label(v-for=\"(time,i) in times\") {{time.label}}\n        .result-table-inner(v-loading=\"tableLoading\")\n            .result-header\n                .result-header-col(v-for=\"offset in getWeekAry()\" :class=\"isWeekend(offset)?'strong-row':''\") {{!checkOffsetIsHoliday(offset) ? getDatetime(offset) : '假日'}}\n                    //- el-tag(v-if=\"checkOffsetIsHoliday(offset)\" type=\"danger\" size=\"mini\" class=\"mx-1\" effect=\"dark\" round) 假日\n            .result-body\n                .result-body-row(v-for=\"(time,i) in times\")\n                    .result-body-col(v-for=\"offset in getWeekAry()\" :class=\"isWeekend(offset)?'strong-row':''\")\n                        template(v-if=\"timetable[offset%7] && !checkOffsetIsHoliday(offset)\")\n                            resultBlock(v-if=\"timetable[offset%7].rows[time.value]\" :results=\"timetable[offset%7].rows[time.value].counselors\" :offset=\"offset\")\n\n</template>\n\n<script>\nimport resultBlock from '@/views/assign/resultBlock'\nimport {weektimeMixin} from \"@/components/weektimeMixin\"\nimport _ from \"lodash\"\nexport default {\n    mixins: [weektimeMixin],\n    components: {resultBlock},\n    data: function () {\n        return {\n            assignCases: [\n                {\n                    caseId: '108000000',\n                    name: '同學A',\n                    available_time: 'M1,M2,M3',\n                    crisis_level: 'A',\n                    discription: '狀態說明超過10字會簡化，滑鼠移到文字上方顯示彈出框',\n                    created_date: '2022/7/6',\n                    init_counselor_name: '心理師A',\n                    status: 'assign',\n                    counselor_name: '心理師A',\n                    consultation_day: 'M',\n                    consultation_time: '2',\n                    counselor_id: '1'\n                }\n            ],\n            counselors: [\n                {\n                    id: '1',\n                    name: '心理師A',\n                    available_time: 'M1,M2'\n                },\n                {\n                    id: '2',\n                    name: '心理師B',\n                    available_time: 'M1,M2,F1,F2'\n                }\n            ],\n            timetable: {\n            },\n            dayList: [],\n            tableLoading: false,\n            json_fields: {\n                \"姓名\": \"name\",\n                \"學號\": \"caseId\" ,\n                \"諮商時段\": \"consultation_datetime\",\n                \"派案老師\": \"counselor_name\",\n                \"諮商開始時間\": \"first_consultation_date\",\n                \"危機程度\": \"crisis_level\",\n                \"初談老師\": \"init_counselor_name\",\n                \"狀態說明\": \"discription\",\n                \"初談時間\": \"created_date\"\n            }\n        }\n    },\n    async created() {\n        this.tableLoading = true\n        await this.$store.dispatch('fetchAssignCases')\n        await this.$store.dispatch('fetchCounselors')\n        this.createResultTable()\n        this.tableLoading = false\n        console.log(this.timetable)\n    },\n    methods: {\n        createResultTable() {\n            this.assignCases = _.cloneDeep(this.$store.state.assignCases.data)\n            this.counselors = this.$store.state.counselors\n\n            console.log(this.assignCases)\n            this.timetable = {}\n                // set week days\n            for(let offset=0 ; offset<=7 ; offset++) {\n                var weekdays = [\"U\",\"M\",\"T\",\"W\",\"R\",\"F\",\"S\"]\n                var today = new Date()\n                today.setDate(today.getDate() + offset)\n                const offset_date = weekdays[today.getDay()]\n                if (offset_date != \"U\" && offset_date!= \"S\") {\n                    // add dayList\n                    this.dayList.push({name: offset_date,offset: offset})\n                    this.timetable[offset] = {rows: {}}\n                    // set counselors\n                    this.counselors.forEach(counselor => {  // get counselors in the day\n                        let availableTimeAry = counselor.available_time.split(',')\n                        availableTimeAry.forEach(availableTime => {\n                            if(availableTime.indexOf(offset_date) >= 0) {\n                                if(!this.timetable[offset].rows[availableTime.charAt(1)])\n                                    this.timetable[offset].rows[availableTime.charAt(1)] = {counselors: {}}\n                                this.timetable[offset].rows[availableTime.charAt(1)].counselors[counselor.name] = 'unassign'\n                            }\n                        })\n                    })\n                }\n            }\n            this.assignCases.forEach(assingCase => {\n                var day = this.dayList.find(e => {return e.name == assingCase.consultation_day})\n                this.timetable[day.offset].rows[assingCase.consultation_time].counselors[assingCase.counselor_name] = assingCase\n            })\n        },\n        isWeekend(offset){\n            var today = new Date()\n            today.setDate(today.getDate() + offset)\n            if(today.getDay()==5) return true\n            return false\n        },\n        getDatetime(offset){\n            var weekdays = [\"（日）\",\"（ㄧ）\",\"（二）\",\"（三）\",\"（四）\",\"（五）\",\"（六）\"]\n            var today = new Date()\n            today.setDate(today.getDate() + offset)\n            var date = (today.getMonth()+1)+' / '+today.getDate()+'  '+weekdays[today.getDay()]\n            return date\n        },\n        getDateStr(offset){\n            var today = new Date()\n            today.setDate(today.getDate() + offset)\n            return today.getFullYear()+'-'+(today.getMonth()+1)+'-'+today.getDate()\n        },\n        getWeekAry(){\n            var ary = []\n            var today = new Date()\n            for(let i=1;i<85;i++) {\n                var the_day = new Date()\n                the_day.setDate(today.getDate() + i)\n                if(the_day.getDay()!=0 && the_day.getDay()!=6){\n                    ary.push(i)\n                }\n            }\n            return ary\n        },\n        downloadXLS() {\n            let cases = _.cloneDeep(this.assignCases)\n            for( let i = 0; i < cases.length; i++) {\n                cases[i].consultation_datetime = '星期'+this.days.find(e => e.value == cases[i].consultation_day).label+' '+this.times.find(e => e.value == cases[i].consultation_time).label\n                // cases[i].created_date = cases[i].created_date.split(\"T\")[0]\n                // cases[i].first_consultation_date = cases[i].first_consultation_date.split(\"T\")[0]\n            }\n            return cases\n        },\n        checkOffsetIsHoliday(offset) {\n            let today = new Date()\n            today.setDate(today.getDate() + offset)\n            return this.checkHoliday(today)\n        }\n    }\n}\n</script>\n<style lang=\"sass\" scoped>\n@import \"@/style/common.sass\"\n$header-height: 1.3em\n$container-height: 70vh\n.result-table\n    user-select: none\n    height: $container-height\n    display: grid\n    grid-template-columns: 100px auto\n    grid-auto-rows: auto\n.result-table-inner\n    height: $container-height\n    width: 100%\n    max-width: 1440px\n    padding-bottom: 15px\n    overflow: scroll\n    overflow-y: hidden\n    grid-column: 2\n    grid-row: 1\n    border: 2px solid $BaseBorder\n    border-width: 2px 2px 2px 0px\n    border-radius: 0 8px 8px 0\n.result-header\n    display: flex\n    align-items: center\n    flex-wrap: nowrap\n    width: fit-content\n    z-index: 2\n    @include lableText()\n    text-align: center\n    \n.result-header-col\n    background-color: $PrimaryText\n    color: $BaseBackground\n    width: 120px\n    border-left: 1px solid $LightBorder\n.strong-row\n    border-right: 2px solid $DarkerBorder\n.result-body\n    position: relative\n    height: 100%\n.result-body-row\n    display: flex\n    align-items: center\n    flex-wrap: nowrap\n    width: fit-content\n    height: calc( 100% / 11 )\n    background-color: #fff\n.result-body-col\n    width: 120px\n    height: 100%\n    border-left: 1px solid $LightBorder\n    border-top: 1px solid $LightBorder\n    background-color: $BaseFill\n\n.result-aside\n    border: 2px solid $BaseBorder\n    border-width: 2px 0 2px 2px\n    display: flex\n    flex-wrap: wrap\n    width: 100px\n    height: $container-height\n    padding-bottom: 15px\n    overflow: scroll\n    overflow-y: hidden\n    z-index: 1\n    background-color: #fff\n    grid-column: 1\n    grid-row: 1\n    border-radius: 8px 0 0 8px\n    box-shadow: 0 2px 4px rgba(0, 0, 0, .12), 0 0 6px rgba(0, 0, 0, .04)\n.result-aside-label\n    @include lableText()\n    display: flex\n    align-items: center\n    justify-content: center\n    width: 100px\n    border-top: 1px solid $LightBorder\n    box-sizing: border-box\n    height: calc( 100% / 11 )\n</style>\n","<template lang=\"pug\">\n.resultBlock\n    el-popover(:placement='offset<10?\"right\":\"left\"' :title='getDatetime(offset)' :width='300' trigger='click' :hide-after='0')\n        el-row.content-container(align=\"middle\")\n            el-col.content-label(:span=\"2\") 未派案\n            el-col(:span=\"22\")\n                el-row(v-for=\"(row,i) in unassignList\" align=\"middle\")\n                    el-col.content-idx(:span=\"2\") {{i+1}}\n                    el-col.content(:span=\"22\")\n                        .content-title {{row}}\n                        div 無資料\n        el-row.content-container(align=\"middle\")\n            el-col.content-label(:span=\"2\") 已派案\n            el-col(:span=\"22\")\n                el-row(v-for=\"(row,i) in assignList\" align=\"middle\")\n                    el-col.content-idx(:span=\"2\" style=\"line-height: 70px\" :class=\"getColor(addOffset(row.first_consultation_date))\") {{i+1}}\n                    el-col.content(:span=\"22\" style=\"height: 70px;\" :class=\"getColor(addOffset(row.first_consultation_date))\")\n                        .content-title(style=\"color: #F0F2F5;\") {{row.counselor_name}}\n                        div(style=\"color: #F0F2F5;\")  {{row.name}} {{row.caseId}}<br>諮商次數：{{addOffset(row.first_consultation_date)}}\n        template(#reference='')\n            .block-container(v-if=\"unassignList.length<=0\")\n                //- .full-block 已滿\n                .divide-block-colored(v-for=\"(item,i) in assignList\" v-show=\"i<showNum\" :style=\"assignList.length>showNum?'width: '+100/showNum+'%':'width: '+100/assignList.length+'%'\" :class=\"getColor(addOffset(item.first_consultation_date))\") {{item.counselor_name}}\n                .more-block(v-if=\"assignList.length>showNum\") +{{assignList.length-showNum}}\n            //- 全為未派案\n            .block-container(v-else-if=\"assignList<=0\")\n                .divide-block(v-for=\"(item,i) in unassignList\" v-show=\"i<showNum\" :style=\"unassignList.length>showNum?'width: '+100/showNum+'%':'width: '+100/unassignList.length+'%'\") {{item}}\n                .more-block(v-if=\"unassignList.length>showNum\") +{{unassignList.length-showNum}}\n            //- 皆有\n            .block-container(v-else)\n                .divide-block(v-for=\"(item,i) in unassignList\" v-show=\"i<showNum\" :style=\"unassignList.length>showNum?'width: '+100/showNum+'0%':'width: '+100/unassignList.length+'%'\") {{item}}\n                .more-block(v-if=\"unassignList.length>showNum\") +{{unassignList.length-showNum+assignList.length}}\n                .more-block(v-else) +{{assignList.length}}\n\n</template>\n\n<script>\nimport {weektimeMixin} from \"@/components/weektimeMixin\"\nexport default {\n    mixins: [weektimeMixin],\n    props: ['results','offset'],\n    data() {\n        return {\n            unassignList: [],\n            assignList: [],\n            showNum: 3\n        }\n    },\n    mounted() {\n        for(var result in this.results){\n            if(this.results[result] == 'unassign') {\n                this.unassignList.push(result)\n            }\n            else{\n                if(this.checkRangeDay(this.offset,this.results[result].end_consultation_date,this.results[result].first_consultation_date,this.results[result].status)) {\n                    let resultData = this.results[result]\n                    this.assignList.push(resultData)\n                }\n                else{\n                    this.unassignList.push(result)\n                }\n            }\n        }\n    },\n    methods: {\n        getColor(time) {\n            if(time >= 15) {\n                return 'purple-block'\n            }\n            else if(time >= 7) {\n                return 'red-block'\n            }\n            else if(time >= 0) {\n                return 'blue-block'\n            }\n            else {\n                return 'gray-block'\n            }\n        },\n        getDatetime(offset){\n            var weekdays = [\"（日）\",\"（ㄧ）\",\"（二）\",\"（三）\",\"（四）\",\"（五）\",\"（六）\"]\n            var today = new Date()\n            today.setDate(today.getDate() + offset)\n            var date = today.getFullYear()+' / '+(today.getMonth()+1)+' / '+today.getDate()+'  '+weekdays[today.getDay()]\n            return date\n        },\n        addOffset(startdate) {\n            var today = new Date()\n            today.setDate(today.getDate() + this.offset)\n            return this.countConsultationNumber(today, startdate)\n        }\n    }\n}\n</script>\n<style lang=\"sass\" scoped>\n@import \"@/style/common.sass\"\n.resultBlock\n    height: calc( 100% - 2px )\n    cursor: pointer\n.content-container\n    border: 1px solid $GrayBorder\n    margin: 10px 0px\n.content-label\n    padding: 5px\n.content-idx\n    line-height: 50px\n    text-align: center\n    background-color: $GrayBorder\n    color: $PrimaryText\n    border-width: 0 !important\n.content\n    height: 50px\n    padding: 5px\n    border: 1px solid $GrayBorder\n    border-width: 1px 1px 1px 0 !important\n.content-title\n    line-height: 1.4em\n    color: $PrimaryText\n    font-weight: bold\n.block-container\n    height: 100%\n    display: flex\n    align-items: center\n.full-block\n    width: 100%\n    padding: 10px\n    background: linear-gradient(90deg, rgb(159, 229, 151), rgb(204, 229, 129))\n    font-weight: bold\n    border-radius: 8px\n    text-align: center\n@mixin resultBox()\n    display: flex\n    align-items: center\n    height: calc( 100% - 2px )\n    text-align: center\n    border-radius: 4px\n    border: 2px solid $PrimaryText\n    border-width: 2px\n    margin: 1px\n    padding: 0 1px\n    line-height: 1.1em\n    font-size: 12px\n    font-weight: bold\n.divide-block\n    @include resultBox()\n    background-color: #FFF\n    border: 1px solid $PrimaryText\n.divide-block-colored\n    @include resultBox()\n    color: $BaseFill\n.more-block\n    @include resultBox()\n    background-color: $PrimaryText\n    color: $BaseFill\n</style>","import { render } from \"./resultBlock.vue?vue&type=template&id=32bf13bc&scoped=true&lang=pug\"\nimport script from \"./resultBlock.vue?vue&type=script&lang=js\"\nexport * from \"./resultBlock.vue?vue&type=script&lang=js\"\n\nimport \"./resultBlock.vue?vue&type=style&index=0&id=32bf13bc&lang=sass&scoped=true\"\n\nimport exportComponent from \"/Users/jerry/Desktop/AI計畫/諮商派案/assignSystem/frontend/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-32bf13bc\"]])\n\nexport default __exports__","import { render } from \"./result.vue?vue&type=template&id=824c058c&scoped=true&lang=pug\"\nimport script from \"./result.vue?vue&type=script&lang=js\"\nexport * from \"./result.vue?vue&type=script&lang=js\"\n\nimport \"./result.vue?vue&type=style&index=0&id=824c058c&lang=sass&scoped=true\"\n\nimport exportComponent from \"/Users/jerry/Desktop/AI計畫/諮商派案/assignSystem/frontend/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-824c058c\"]])\n\nexport default __exports__","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!./result.vue?vue&type=style&index=0&id=824c058c&lang=sass&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!./resultBlock.vue?vue&type=style&index=0&id=32bf13bc&lang=sass&scoped=true\""],"sourceRoot":""}